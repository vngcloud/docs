# Cấu hình cho một Network Load Balancer

Tại trang \[Integrate with Network Load Balancer], chúng tôi đã hướng dẫn bạn cách thực hiện cài đặt VNGCloud LoadBalancer Controller, tạo và apply yaml file. Sau đây là chi tiết các ý nghĩa các thông tin bạn có thể thiết lập trong yaml file:

### Annotation <a href="#configureforanetworkloadbalancer-annotation" id="configureforanetworkloadbalancer-annotation"></a>

Sử dụng các annotation dưới đây để tuỳ chỉnh Load Balancer phù hợp với nhu cầu của bạn trên VKS:

<table data-full-width="true"><thead><tr><th width="284.45452880859375">Annotation</th><th width="244.45458984375">Bắt buộc/ Không bắt buộc</th><th>Ý nghĩa</th></tr></thead><tbody><tr><td>vks.vngcloud.vn/load-balancer-id</td><td>Không bắt buộc</td><td><ul><li><strong>Nếu bạn chưa có sẵn một Network Load Balancer</strong> đã khởi tạo trước đó trên hệ thống vLB. Chúng tôi sẽ tự động tạo 1 NLB trên cluster của bạn. NLB này sẽ hiển thị trên vLB Portal, chi tiết truy cập tại <a href="https://hcm-3.console.vngcloud.vn/vserver/load-balancer/vlb">đây</a></li><li><strong>Nếu bạn đã có sẵn một Network Load Balancer</strong> đã khởi tạo trước đó trên hệ thống vLB và bạn muốn tái sử dụng NLB cho cluster của bạn. Lúc này, bạn hãy nhập thông tin Load Balancer ID vào annotation này.</li></ul></td></tr><tr><td>vks.vngcloud.vn/load-balancer-name</td><td>Không bắt buộc</td><td><ul><li>Annotation <code>vks.vngcloud.vn/load-balancer-name</code> sẽ được sử dụng nếu bạn <strong>không</strong> sử dụng annotation <code>load-balancer-id</code>.</li><li>Annotation <code>vks.vngcloud.vn/load-balancer-name</code> <strong>chỉ có ý nghĩa</strong> khi bạn tạo mới một load balancer. Sau khi load balancer được tạo thành công, annotation này <strong>sẽ tự động bị xóa</strong>. Việc sử dụng annotation này sau khi load balancer được tạo sẽ <strong>không có tác dụng</strong>.</li><li><strong>Khi bạn sử dụng annotation này, nếu bạn chưa có sẵn một Network Load Balancer</strong> đã khởi tạo trước đó trên hệ thống vLB. Chúng tôi sẽ tự động tạo 1 NLB trên cluster của bạn. ALB này sẽ hiển thị trên vLB Portal, chi tiết truy cập tại <a href="https://hcm-3.console.vngcloud.vn/vserver/load-balancer/vlb">đây</a></li><li><strong>Nếu bạn đã có sẵn một Network Load Balancer</strong> đã khởi tạo trước đó trên hệ thống vLB và bạn muốn tái sử dụng NLB cho cluster của bạn. Lúc này, bạn hãy nhập thông tin Load Balancer Name vào annotation này.</li></ul></td></tr><tr><td>vks.vngcloud.vn/package-id</td><td>Không bắt buộc</td><td><ul><li>Nếu bạn không nhập thông tin này thì mặc định chúng tôi sẽ sử dụng cấu hình <strong>NLB Small.</strong></li><li>Nếu bạn đã có sẵn host vLB đang ACTIVE và bạn muốn tích hợp host này vô cụm K8S của bạn, vui lòng bỏ qua trường thông tin này.</li></ul></td></tr><tr><td>vks.vngcloud.vn/prefer-zone-id</td><td>Không bắt buộc</td><td><p></p><ul><li>Nếu bạn không nhập thông tin này, hệ thống sẽ tự chọn ngẫu nhiên một <strong>zone</strong> trong các <strong>zone</strong> bạn đã chọn sử dụng.</li></ul><ul><li>Nếu bạn muốn Load Balancer được tạo trong một <strong>zone cụ thể</strong>, hãy nhập <strong>Zone ID</strong> vào annotation này. Ví dụ: <code>HCM03-1A</code>, <code>HCM03-1B</code>, <code>HCM03-1C</code>, <code>HAN01-1A</code>.</li></ul></td></tr><tr><td>vks.vngcloud.vn/prefer-subnet-id</td><td>Không bắt buộc</td><td><ul><li>Nếu không khai báo, hệ thống sẽ chọn ngẫu nhiên một <strong>subnet</strong> trong các <strong>subnet</strong> thuộc zone bạn đã chọn.</li></ul><ul><li>Nếu bạn muốn Load Balancer được tạo trong một <strong>subnet cụ thể</strong>, hãy nhập <strong>Subnet ID</strong> vào annotation này.</li></ul></td></tr><tr><td>vks.vngcloud.vn/tags</td><td>Không bắt buộc</td><td><ul><li>Tag được gắn thêm cho NLB của bạn.</li></ul></td></tr><tr><td>vks.vngcloud.vn/scheme</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>internet-facing</strong>, bạn có thể đổi thành <strong>internal</strong> tùy theo nhu cầu sử dụng.</li></ul></td></tr><tr><td>vks.vngcloud.vn/security-groups</td><td>Không bắt buộc</td><td><ul><li>Mặc định sẽ tạo một <strong>security group default</strong> theo Cluster của bạn.</li></ul></td></tr><tr><td>vks.vngcloud.vn/inbound-cidrs</td><td>Không bắt buộc</td><td><ul><li>Mặc định All CIRD: <strong>0.0.0.0/0</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/healthy-threshold-count</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>3</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/unhealthy-threshold-count</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>3</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/healthcheck-interval-seconds</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>30</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/healthcheck-timeout-seconds</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>5</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/healthcheck-protocol</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>TCP</strong>. Người dùng có thể chọn một trong các giá trị TCP/ HTTP/ HTTPS/ PING-UDP</li></ul></td></tr><tr><td>vks.vngcloud.vn/healthcheck-http-method</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>GET</strong>. Người dùng có thể chọn một trong các giá trị GET / POST / PUT</li></ul></td></tr><tr><td>vks.vngcloud.vn/healthcheck-path</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>/</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/healthcheck-http-version</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>1.0</strong>. Người dùng có thể chọn một trong các giá trị 1.0, 1.1</li></ul></td></tr><tr><td>vks.vngcloud.vn/healthcheck-http-domain-name</td><td>Không bắt buộc</td><td><ul><li>Mặc định trống</li></ul></td></tr><tr><td>vks.vngcloud.vn/healthcheck-port</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>traffic port</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/success-codes</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>200</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/idle-timeout-client</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>50</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/idle-timeout-member</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>50</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/idle-timeout-connection</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>5</strong></li></ul></td></tr><tr><td>vks.vngcloud.vn/pool-algorithm</td><td>Không bắt buộc</td><td><ul><li>Mặc định <strong>ROUND_ROBIN</strong>. Người dùng có thể chọn một trong các giá trị ROUND_ROBIN / LEAST_CONNECTIONS / SOURCE_IP</li></ul></td></tr><tr><td>vks.vngcloud.vn/target-node-labels</td><td>Không bắt buộc</td><td><ul><li>Mặc định trống</li></ul></td></tr><tr><td>vks.vngcloud.vn/enable-proxy-protocol</td><td>Không bắt buộc</td><td><ul><li>Mặc định trống. Người dùng chỉ định danh sách các service name trong Load Balancer mà Proxy Protocol sẽ được áp dụng.</li></ul></td></tr><tr><td>vks.vngcloud.vn/is-poc</td><td>Không bắt buộc</td><td><ul><li>Mặc định false.</li><li>Nếu người dùng chỉ định field này là true, hệ thống sẽ tạo Load Balancer và thực hiện thanh toán bởi số dư ví POC.</li></ul></td></tr><tr><td>vks.vngcloud.vn/enable-autoscale</td><td>Không bắt buộc</td><td><ul><li>Mặc định false.</li><li>Nếu người dùng chỉ định field này là true, hệ thống sẽ tạo Load Balancer với mode autoscale được bật.</li></ul></td></tr><tr><td>vks.vngcloud.vn/ignore</td><td>Không bắt buộc</td><td><ul><li>Mặc định false.</li><li>Nếu người dùng chỉ định field này là true, hệ thống VKS sẽ không quản lý Service. Mọi thay đổi đối trên Service sẽ bị bỏ qua và LoadBalancer sẽ không được cập nhật.</li></ul></td></tr></tbody></table>

&#x20;

&#x20;
